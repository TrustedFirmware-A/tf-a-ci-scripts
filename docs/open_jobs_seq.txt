# This is to be pasted on to websequencediagrams.com to get the sequence
# diagram of current CI setup

title Trusted Firmware Open CI core jobs/scripts

actor gerrit reviewer
participant tf-gerrit-tforg-l1
gerrit reviewer->+tf-gerrit-tforg-l1: "Allow-CI" manual trigger from gerrit
tf-gerrit-tforg-l1->+tf-ci-gateway: Pass TEST_GROUPS
tf-ci-gateway->+tf-a-parameterized-builder: Split TEST_GROUPS into TEST_DESC
tf-a-parameterized-builder->+tf-a-builder: Pass TEST_DESC
tf-a-builder->+builders.sh:
builders.sh->+run_local_ci.sh: Prepare environment and launch build
note over run_local_ci.sh: Build TEST_DESC
note over run_local_ci.sh: Generate LAVA [Juno/FVP] YAML
run_local_ci.sh->+builders.sh: complete
builders.sh->+tf-a-builder:
tf-a-builder->+post-build-lava:
post-build-lava->+LAVA: submit job
note over LAVA: Juno/FVP Linux/TFTF boot and test
LAVA->+post-build-lava: completes
post-build-lava->+tf-a-builder:
tf-a-builder->+tf-gerrit-tforg-l1:
